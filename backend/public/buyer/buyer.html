<!DOCTYPE html>
<html lang="zh-Hant">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ReuseX è²·å®¶é¦–é </title>
  <link rel="stylesheet" href="style.css" />
</head>

<body>

  <!-- ===== å°è¦½åˆ— ===== -->
  <div class="navbar">
    <div class="nav-left">
      <img src="images/logo.png" alt="ReuseX Logo" class="logo-img">
      <a href="buyer.html" class="nav-home active">é¦–é </a>
      <a href="orders.html">è¨‚å–®è¿½è¹¤</a>
      <a href="myreviews.html">æˆ‘çš„è©•åƒ¹</a>
    </div>

    <div class="nav-right">
      <div class="search-box">
        <input type="text" id="searchInput" placeholder="æœå°‹å•†å“..." />
        <button id="searchBtn">ğŸ”</button>
      </div>

      <img src="images/user.png" alt="User" class="user-icon">
      <a href="#" id="cartBtn">ğŸ›’ (<span id="cartCount">0</span>)</a>
    </div>
  </div>

  <!-- ===== å…¬å‘Šåˆ— ===== -->
  <div id="announcementBar" class="announcement-bar">
    <div class="announcement-inner">
      <span class="icon">ğŸ“¢</span>
      <span id="announcementText">ï¼ˆå…¬å‘Šè¼‰å…¥ä¸­ï¼‰</span>
    </div>
  </div>

  <!-- ===== Banner ===== -->
  <div class="banner">
    <h2>ReuseX â€” æ‰¾åˆ°ä¸‹ä¸€å€‹çæƒœå®ƒçš„ä¸»äººã€‚</h2>
    <p>é«˜å“è³ªäºŒæ‰‹å•†å“ Â· å€¼å¾—ä¿¡è³´çš„äº¤æ˜“é«”é©—</p>
  </div>

  <!-- ===== å•†å“åˆ—è¡¨ ===== -->
  <div class="product-list" id="productList"></div>

  <!-- ===== è³¼ç‰©è»Šè¦–çª— ===== -->
  <div id="checkoutModal" class="modal hidden">
    <div class="modal-content">
      <h3>ğŸ› è³¼ç‰©è»Šæ¸…å–®</h3>
      <ul id="cartItems"></ul>

      <button id="testOrder" class="save-btn">
        ğŸ§ª æ¸¬è©¦ä¸‹å–®ï¼ˆå»ºç«‹è¨‚å–®ï¼‰
      </button>

      <button id="confirmOrder" class="save-btn">ç¢ºèªä¸‹å–®</button>
      <button id="closeModal" class="save-btn">é—œé–‰</button>
    </div>
  </div>

  <!-- ===== åŠ å…¥è³¼ç‰©è»Šæç¤º ===== -->
  <div id="addedModal" class="modal hidden">
    <div class="modal-content">
      <h3>âœ… å·²åŠ å…¥è³¼ç‰©è»Šï¼</h3>
      <div style="margin-top: 15px;">
        <button id="continueShopping" class="save-btn">ç¹¼çºŒé€›é€›</button>
        <button id="goToCheckout" class="save-btn">ç›´æ¥çµå¸³</button>
      </div>
    </div>
  </div>

  <!-- ===== JS ===== -->
  <script src="buyer.js" defer></script>
  <script src="/shared/announcement_bar.js"></script>

  <!-- ===== æ¸¬è©¦ä¸‹å–® module ===== -->
  <script type="module">
    import { initDB, getOrders, createOrder } from "../shared/api.js";

    initDB();
    console.log("ç›®å‰è¨‚å–®è³‡æ–™ï¼š", getOrders());

    const btn = document.querySelector("#testOrder");

    btn?.addEventListener("click", () => {
      const newOrder = {
        orderId: "ORD" + Date.now(),
        buyerId: "B001",
        sellerId: "S001",
        status: "å¾…å‡ºè²¨",
        messages: [],
        review: {
          rating: null,
          comment: "",
          sellerReply: ""
        }
      };

      createOrder(newOrder);
      console.log("ä¸‹å–®å¾Œè¨‚å–®è³‡æ–™ï¼š", getOrders());
      alert("âœ… å·²å»ºç«‹æ–°è¨‚å–®ï¼");
    });
  </script>

</body>
</html>
